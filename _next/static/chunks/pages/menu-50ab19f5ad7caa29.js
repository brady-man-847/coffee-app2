(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[934],{3023:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/menu",function(){return t(665)}])},5179:function(e,n,t){"use strict";t.d(n,{Z:function(){return i}});var r=t(5893),a=t(4974),o=t(7294);function i(e){let{handleValueChange:n,...t}=e,[i,l]=(0,o.useState)(""),s=e=>{let{value:t}=e.target,r=t.replace(/\D/g,"").replace(/(\d{3})(\d{4})(\d{4})/,"$1-$2-$3").slice(0,13);l(r),n(r)};return(0,r.jsx)(a.Z,{type:"text",id:"phone-number-input",value:i,onChange:s,...t})}},1084:function(e,n,t){"use strict";t.d(n,{g:function(){return o}});var r=t(5893),a=t(1458);function o(){return(0,r.jsx)(a.Z,{sx:{background:"linear-gradient(to right, #6fcbb6, #9c64f4)","> span":{backgroundColor:"primary"}}})}},665:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return z}});var r=t(5893),a=t(2280),o=t(8895),i=t(5861),l=t(2797),s=t(3508),u=t(7294);let c=["COFFEE","NON-COFFEE","TEA","ADE & JUICE","FLATCCINO","BOTTLE","SNACK","S / W"];var d=t(7837),p=t(8704),x=t(8433),h=t(7357),j=t(629),m=t(4682);let f={isDrawerOpen:!1,menu:{},order:{}},E=(e,n)=>{switch(n.type){case"SET_DRAWER_OPEN":return{...e,isDrawerOpen:n.isDrawerOpen};case"SET_MENU":return{...e,menu:n.menu};case"SET_ORDER":return{...e,order:n.order};default:throw Error("unknown action type")}},Z=()=>(0,u.useReducer)(E,f),g=(0,m.kr)([f,()=>null]);function v(e){let{data:n}=e,t=(0,m.Sz)(g,e=>e[1]),a=e=>{t({type:"SET_DRAWER_OPEN",isDrawerOpen:!0}),t({type:"SET_MENU",menu:e})};return(0,r.jsx)(h.Z,{children:null==n?void 0:n.map(e=>(0,r.jsx)(j.Z,{elevation:3,onClick:()=>a(e),sx:[{p:1},e=>({"&:hover":{color:e.palette.primary.main,backgroundColor:e.palette.primary.contrastText,cursor:"pointer"}})],children:(0,r.jsx)(i.Z,{children:e.name})}))})}var _=t(1084);function C(){let e=(0,u.useId)(),{data:n,isLoading:t}=(0,d.a)(p.a.menu.all,async()=>{let{data:e}=await x.Z.get("https://mcafe-api.onrender.com/menu");return e});return t?(0,r.jsx)(_.g,{}):(0,r.jsx)(r.Fragment,{children:n?(n=>{let t=e=>n.filter(n=>n.type===e);return c.map((n,u)=>(0,r.jsxs)(a.Z,{defaultExpanded:!0,children:[(0,r.jsx)(o.Z,{expandIcon:(0,r.jsx)(s.Z,{}),children:(0,r.jsx)(i.Z,{children:n})}),(0,r.jsx)(l.Z,{children:(0,r.jsx)(v,{data:t(u)},"".concat(e+u,"d"))})]},e+u))})(n):(0,r.jsx)(_.g,{})})}var R=t(7533),T=t(3946),b=t(3321),y=t(594),O=t(4054),S=t(480),w=t(9368),D=t(2890),L=t(6872),N=t(6486),k=t.n(N);function P(e){let{idx:n,data:t}=e,{order:a}=(0,m.Sz)(g,e=>e[0]),o=(0,m.Sz)(g,e=>e[1]),i=(e,t)=>{o({type:"SET_ORDER",order:{...a,optionValueList:k().defaults({[n]:t},{...a.optionValueList})}})},l=e=>{let{value:t,checked:r}=e.target;o({type:"SET_ORDER",order:{...a,optionValueList:k().defaults({[n]:r?t:null},{...a.optionValueList})}})};return(0,r.jsx)(h.Z,{children:(0,r.jsx)(O.Z,{children:(null==t?void 0:t.length)===1?(0,r.jsx)(S.Z,{value:t[0].code,control:(0,r.jsx)(w.Z,{onChange:l}),label:t[0].name}):(0,r.jsx)(D.Z,{onChange:i,children:null==t?void 0:t.map(e=>(0,r.jsx)(S.Z,{value:e.code,control:(0,r.jsx)(L.Z,{}),label:e.name}))})})})}var V=t(5179);function A(){var e,n;let{menu:t,order:c,isDrawerOpen:j}=(0,m.Sz)(g,e=>e[0]),f=(0,m.Sz)(g,e=>e[1]),{data:E,isLoading:Z}=(e=t.code,n=void 0!==t.code,(0,d.a)(p.a.menu.option(e),async()=>{let{data:n}=await x.Z.get("https://mcafe-api.onrender.com/menu/".concat(e));return n},{enabled:n})),[v,C]=(0,u.useState)(!1),O=async()=>{console.log({...c,menuCode:t.code,optionValueList:k().values(c.optionValueList)}),C(!0);let e=await x.Z.post("https://mcafe-api.onrender.com/order",{...c,menuCode:t.code,optionValueList:k().compact(k().values(c.optionValueList)),setDefault:!1}).then(e=>{let{data:n}=e;alert(n)}).catch(e=>{alert(e.message)}).finally(()=>{C(!1)});return console.log(e),null},S=e=>{f({type:"SET_ORDER",order:{...c,phone:e}})},w=()=>{f({type:"SET_DRAWER_OPEN",isDrawerOpen:!1})};return(0,r.jsx)(R.ZP,{anchor:"bottom",open:j,onClose:w,ModalProps:{sx:{alignContent:"center",borderTopLeftRadius:3,borderTopRightRadius:3,height:"80vh"}},SlideProps:{},PaperProps:{sx:{width:"100%",alignContent:"center",m:"auto",p:2,borderTopLeftRadius:16,borderTopRightRadius:16}},children:Z?(0,r.jsx)(_.g,{}):(0,r.jsxs)(h.Z,{children:[(0,r.jsx)(T.Z,{onClick:w,sx:{float:"right"},children:(0,r.jsx)(y.Z,{})}),(0,r.jsx)(i.Z,{variant:"h6",component:"h2",sx:{mt:1,mb:1,pl:1},children:t.name}),!!E&&E.optionGroupList.map((e,n)=>(0,r.jsxs)(a.Z,{sx:{mt:2},defaultExpanded:!0,children:[(0,r.jsx)(o.Z,{expandIcon:(0,r.jsx)(s.Z,{}),children:e.name}),(0,r.jsx)(l.Z,{children:(0,r.jsx)(P,{idx:n,data:e.optionValueList})})]})),(0,r.jsxs)(h.Z,{sx:{display:"flex",justifyContent:"space-around"},children:[(0,r.jsx)(V.Z,{label:"핸드폰 번호",variant:"outlined",handleValueChange:S}),(0,r.jsx)(b.Z,{variant:"contained",onClick:O,disabled:v,children:"장바구니"})]})]})})}function F(){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(C,{}),(0,r.jsx)(A,{})]})}function z(){return(0,r.jsx)(g.Provider,{value:Z(),children:(0,r.jsx)(F,{})})}}},function(e){e.O(0,[662,177,694,774,888,179],function(){return e(e.s=3023)}),_N_E=e.O()}]);