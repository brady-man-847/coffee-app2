(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[934],{3023:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/menu",function(){return t(6281)}])},5179:function(e,n,t){"use strict";t.d(n,{Z:function(){return s}});var r=t(5893),o=t(4974),a=t(7294);function s(e){let{handleValueChange:n,...t}=e,[s,i]=(0,a.useState)(""),l=e=>{let{value:t}=e.target,r=t.replace(/\D/g,"").replace(/(\d{3})(\d{4})(\d{4})/,"$1-$2-$3").slice(0,13);i(r),n(r)};return(0,r.jsx)(o.Z,{type:"text",id:"phone-number-input",value:s,onChange:l,...t,sx:{width:"100%"}})}},1084:function(e,n,t){"use strict";t.d(n,{g:function(){return a}});var r=t(5893),o=t(1458);function a(){return(0,r.jsx)(o.Z,{sx:{background:"linear-gradient(to right, #6fcbb6, #9c64f4)","> span":{backgroundColor:"primary"}}})}},6281:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return M}});var r=t(5893),o=t(1084),a=t(7294),s=t(4682);let i={isDrawerOpen:!1,menu:{},order:{}},l=(e,n)=>{switch(n.type){case"SET_DRAWER_OPEN":return{...e,isDrawerOpen:n.isDrawerOpen};case"SET_MENU":return{...e,menu:n.menu};case"SET_ORDER":return{...e,order:n.order};case"INIT_MENU":return{...i};default:throw Error("unknown action type")}},c=()=>(0,a.useReducer)(l,i),u=(0,s.kr)([i,()=>null]);var d=t(7357),p=t(629),x=t(5861);function h(e){let{data:n}=e,t=(0,s.Sz)(u,e=>e[1]),o=e=>{0!==e.stock&&(t({type:"SET_DRAWER_OPEN",isDrawerOpen:!0}),t({type:"SET_MENU",menu:e}))};return(0,r.jsx)(d.Z,{sx:{display:"flex",flexDirection:"column",gap:"1px"},children:null==n?void 0:n.map(e=>(0,r.jsx)(p.Z,{elevation:3,onClick:()=>o(e),sx:[{p:1},n=>({backgroundColor:0===e.stock?n.palette.grey[100]:"",color:0===e.stock?n.palette.grey[300]:"","&:hover":{backgroundColor:0===e.stock?n.palette.grey[300]:n.palette.primary.contrastText,cursor:0===e.stock?"not-allowed":"pointer",color:0===e.stock?n.palette.grey[300]:n.palette.primary.main}})],children:(0,r.jsx)(x.Z,{children:0===e.stock?(0,r.jsxs)(r.Fragment,{children:["`SOLD OUT`",(0,r.jsx)("del",{children:e.name})]}):e.name})}))})}let j=["COFFEE","NON-COFFEE","TEA","ADE & JUICE","FLATCCINO","BOTTLE","SNACK","S / W"];var m=t(7848),f=t(5676),g=t(8433),E=t(3508),Z=t(2280),v=t(8895),y=t(2797);function _(){let e=(0,a.useId)(),{data:n,isLoading:t}=(0,m.a)(f.a.menu.all,async()=>{let{data:e}=await g.Z.get("https://mcafe-api.onrender.com/menu");return e});return t?(0,r.jsx)(o.g,{}):(0,r.jsx)(r.Fragment,{children:n?(n=>{let t=e=>n.filter(n=>n.type===e);return j.map((n,o)=>(0,r.jsxs)(Z.Z,{children:[(0,r.jsx)(v.Z,{expandIcon:(0,r.jsx)(E.Z,{}),children:(0,r.jsx)(x.Z,{children:n})}),(0,r.jsx)(y.Z,{children:(0,r.jsx)(h,{data:t(o)},"".concat(e+o))})]},e+o))})(n):(0,r.jsx)(o.g,{})})}var w=t(5179),C=t(4054),T=t(480),k=t(9368),O=t(2890),S=t(6872),b=t(6486),N=t.n(b);function R(e){let{idx:n,data:t}=e,{order:o}=(0,s.Sz)(u,e=>e[0]),a=(0,s.Sz)(u,e=>e[1]),i=(e,t)=>{a({type:"SET_ORDER",order:{...o,optionValueList:N().defaults({[n]:t},{...o.optionValueList})}})},l=e=>{let{value:t,checked:r}=e.target;a({type:"SET_ORDER",order:{...o,optionValueList:N().defaults({[n]:r?t:null},{...o.optionValueList})}})};return(0,r.jsx)(d.Z,{children:(0,r.jsx)(C.Z,{children:(null==t?void 0:t.length)===1?(0,r.jsx)(T.Z,{value:t[0].code,control:(0,r.jsx)(k.Z,{onChange:l}),label:t[0].name,checked:t[0].isOptionDefault}):(0,r.jsx)(O.Z,{onChange:i,children:null==t?void 0:t.map(e=>(0,r.jsx)(T.Z,{value:e.code,control:(0,r.jsx)(S.Z,{}),label:e.name,checked:e.isOptionDefault}))})})})}var D=t(8228),L=t(594),I=t(4510),P=t(7533),F=t(3946),V=t(3321);function U(){var e,n;let{menu:t,order:i,isDrawerOpen:l}=(0,s.Sz)(u,e=>e[0]),c=(0,s.Sz)(u,e=>e[1]),{data:p,isLoading:h}=(e=t.code,n=void 0!==t.code,(0,m.a)(f.a.menu.option(e),async()=>{let{data:n}=await g.Z.get("https://mcafe-api.onrender.com/menu/".concat(e));return n},{enabled:n})),{mutate:j,isLoading:_}=function(){let e=async e=>{let{order:n,menuCode:t}=e,{data:r}=await g.Z.post("https://mcafe-api.onrender.com/order",{...n,menuCode:t,optionValueList:N().compact(N().values(n.optionValueList)),setDefault:!1});return r};return(0,D.D)(f.a.order.add(),e)}(),[C,T]=(0,a.useState)(!1),k=async()=>{T(!0),j({order:i,menuCode:t.code},{onSuccess:e=>window.alert(e),onError:e=>{window.alert(e.message)},onSettled:()=>{T(!1),c({type:"INIT_MENU"})}})},O=e=>{c({type:"SET_ORDER",order:{...i,phone:e}})},S=()=>{c({type:"INIT_MENU"})};return(0,r.jsx)(P.ZP,{anchor:"bottom",open:l,onClose:S,ModalProps:{sx:{alignContent:"center",borderTopLeftRadius:3,borderTopRightRadius:3,height:"80vh"}},SlideProps:{},PaperProps:{sx:{width:"100%",alignContent:"center",m:"auto",p:2,borderTopLeftRadius:16,borderTopRightRadius:16,height:"80vh"}},children:h||_?(0,r.jsx)(o.g,{}):(0,r.jsxs)(d.Z,{children:[(0,r.jsx)(F.Z,{onClick:S,sx:{float:"right"},children:(0,r.jsx)(L.Z,{})}),(0,r.jsx)(x.Z,{variant:"h6",component:"h2",sx:{mt:1,mb:1,pl:1},children:t.name}),!!p&&p.optionGroupList.map((e,n)=>(0,r.jsxs)(Z.Z,{sx:{mt:2},defaultExpanded:!0,children:[(0,r.jsx)(v.Z,{expandIcon:(0,r.jsx)(E.Z,{}),children:e.name}),(0,r.jsx)(y.Z,{children:(0,r.jsx)(R,{idx:n,data:e.optionValueList})})]})),(0,r.jsxs)(d.Z,{sx:{display:"flex",justifyContent:"space-around",gap:"8px"},children:[(0,r.jsx)(w.Z,{label:"핸드폰 번호",variant:"outlined",handleValueChange:O}),(0,r.jsx)(V.Z,{variant:"contained",onClick:k,disabled:C,sx:{margin:"4px"},children:(0,r.jsx)(I.Z,{})})]})]})})}function A(){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(_,{}),(0,r.jsx)(U,{})]})}function M(){return(0,r.jsx)(u.Provider,{value:c(),children:(0,r.jsx)(A,{})})}}},function(e){e.O(0,[662,119,652,774,888,179],function(){return e(e.s=3023)}),_N_E=e.O()}]);